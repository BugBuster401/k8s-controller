apiVersion: apps/v1
kind: Deployment
metadata:
    name: k8s-controller
    namespace: default
spec:
    replicas: 1
    selector:
        matchLabels:
            app: k8s-controller
            number: "1"
    template:
        metadata:
            labels:
                app: k8s-controller
                number: "1"
        spec:
            containers:
            -   name: k8s-worker
                image: k8s-worker:1.0
                env:
                -   name: TASK_NUMBER
                    value: "1"
                -   name: WORKER_ID
                    valueFrom:
                        fieldRef:
                            fieldPath: metadata.name
                resources:
                    limits:
                        memory: "128Mi"
                        cpu: "500m"
                    requests:
                        memory: "50Mi"
                        cpu: "100m"